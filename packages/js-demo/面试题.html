<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id='start'>start</button>
    <button id="pause">pause</button>
    <script>
        /**
         * ‰æùÊ¨°È°∫Â∫èÊâßË°å‰∏ÄÁ≥ªÂàó‰ªªÂä°
         * ÊâÄÊúâ‰ªªÂä°ÂÖ®ÈÉ®ÂÆåÊàêÂêéÂèØ‰ª•ÂæóÂà∞ÊØè‰∏™‰ªªÂä°ÁöÑÊâßË°åÁªìÊûú
         * ÈúÄË¶ÅËøîÂõû‰∏§‰∏™ÊñπÊ≥ïÔºåstartÁî®‰∫éÂêØÂä®‰ªªÂä°ÔºåpauseÁî®‰∫éÊöÇÂÅú‰ªªÂä°
         * ÊØè‰∏™‰ªªÂä°ÂÖ∑ÊúâÂéüÂ≠êÊÄßÔºåÂç≥‰∏çÂèØ‰∏≠Êñ≠ÔºåÂè™ËÉΩÂú®‰∏§‰∏™‰ªªÂä°‰πãÈó¥‰∏≠Êñ≠
         */
        function processTask(...tasks) {
            let isRunning = false
            let result = []
            let i = 0
            return {
                start(){
                    return new Promise(async (resolve, reject)=>{
                        if(isRunning){
                            return;
                        }
                        isRunning = true
                        while (i < tasks.length) {
                            const task = tasks[i];
                            const r = await task()
                            result.psuh(r)
                            i++
                            if(!isRunning){
                                return
                            }
                        }
                        isRunning = false;
                        resolve(result)
                    })
                },
                pause(){
                    isRunning = false
                }
            }
        }

        const startBtn = document.querySelector("#start")
        const pauseBtn = document.querySelector("#pause")
        console.log('%c ü•ì pauseBtn: ', 'font-size:12px;background-color: #42b983;color:#fff;', pauseBtn);

        function t1(){
            return new Promise((resolve)=>{
            console.log('‰ªªÂä°ÂºÄÂßã')
                setTimeout(() => {
                    console.log('‰ªªÂä°ÁªìÊùü')
                    resolve()
                }, 3000);
            })
        }

        const processObj = processTask(t1, t1, t1)
        processObj.start()

    </script>    
</body>
</html>